import type { Route } from "./+types/recipeListPage";
import RecipeList from "../components/recipeList/RecipeList";

import { isRouteErrorResponse } from "react-router";
import fakeDb from "~/db/fakeDb";

export function meta({}: Route.MetaArgs) {
  return [
    { title: "New React Router App" },
    { name: "description", content: "Welcome to React Router!" },
  ];
}

export async function loader() {
  return fakeDb.getRecipes();
}

export default function Home({ loaderData }: Route.ComponentProps) {
  return <RecipeList recipes={loaderData} />;
}

export function ErrorBoundary({ error }: Route.ErrorBoundaryProps) {
  let message = "Oops!";
  let details = "An unexpected error occurred.";

  if (isRouteErrorResponse(error)) {
    message = error.status === 404 ? "404" : "Error";
    details = error.statusText;
  }

  return (
    <div>
      <h1>{message}</h1>
      <p>{details}</p>
    </div>
  );
}

export async function action({ request }: { request: Request }) {
  const data = await request.formData();
  await fakeDb.addRecipe({
    // @ts-ignore
    id: data.get("id"),
    // @ts-ignore
    name: data.get("title"),
    image:
      "data:image/png;base64,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",
  });
  return { ok: true };
}

export function HydrateFallback() {
  return <p>Loading Recipes...</p>;
}
